<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Love Animation</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
    }
    #love {
      position: relative;
      z-index: 2;
      text-align: center;
      width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      pointer-events: none;
    }
    h1 {
      color: #fff;
      font-family: 'Segoe Script', cursive;
      font-size: 3rem;
      text-shadow: 0 0 20px #ff6a88, 0 0 40px #ff6a88;
      margin-bottom: 20px;
      letter-spacing: 2px;
      pointer-events: auto;
    }
    #days-counter {
      font-size: 2rem;
      color: #fff;
      text-shadow: 0 0 10px #ff6a88;
      margin-bottom: 20px;
      pointer-events: auto;
    }
    #love-canvas {
      position: fixed;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      z-index: 1;
      pointer-events: auto;
    }
    #love-text-rain {
      position: fixed;
      left: 0; top: 0; width: 100vw; height: 100vh;
      pointer-events: none;
      z-index: 10;
    }
    .rain-text {
      position: absolute;
      top: -2rem;
      color: #fff;
      font-family: 'Segoe Script', cursive;
      text-shadow: 0 0 20px #ff6a88, 0 0 40px #ff6a88;
      white-space: nowrap;
      opacity: 0.85;
      animation: rain-fall linear forwards;
    }
    @keyframes rain-fall {
      to {
        top: 100vh;
        opacity: 0.2;
      }
    }
  </style>
</head>
<body>
  <div id="love">
    <h1>ANH YÊU EM 💖</h1>
    <div id="days-counter"></div>
    <canvas id="love-canvas"></canvas>
    <div id="love-text-rain"></div>
  </div>
  <script>
    // Days counter
    const startDate = new Date(2025, 1, 25); // 2025-02-25 (February 25, 2025)
    function updateDaysCounter() {
      const now = new Date();
      const diffTime = now - startDate;
      const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
      document.getElementById('days-counter').innerHTML =
        `Anh và em đã yêu nhau <b style="color:#ff6a88;">${diffDays}</b> ngày rồi! 💞`;
    }
    updateDaysCounter();
    setInterval(updateDaysCounter, 60 * 1000);

    // Heart animation
    const canvas = document.getElementById('love-canvas');
    const ctx = canvas.getContext('2d');
    let hearts = [];

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    function drawHeart(x, y, size, color, alpha) {
      ctx.save();
      ctx.globalAlpha = alpha;
      ctx.beginPath();
      ctx.moveTo(x, y + size / 4);
      ctx.bezierCurveTo(x, y, x - size / 2, y, x - size / 2, y + size / 4);
      ctx.bezierCurveTo(x - size / 2, y + size / 2, x, y + size, x, y + size * 1.2);
      ctx.bezierCurveTo(x, y + size, x + size / 2, y + size / 2, x + size / 2, y + size / 4);
      ctx.bezierCurveTo(x + size / 2, y, x, y, x, y + size / 4);
      ctx.closePath();
      ctx.fillStyle = color;
      ctx.shadowColor = color;
      ctx.shadowBlur = 15;
      ctx.fill();
      ctx.restore();
    }

    function randomColor() {
      const colors = ['#ff6a88', '#ff99ac', '#ffb6b9', '#fad0c4', '#fcb69f'];
      return colors[Math.floor(Math.random() * colors.length)];
    }

    function spawnHeart(x, y) {
      hearts.push({
        x: x,
        y: y,
        size: Math.random() * 18 + 18,
        alpha: 1,
        color: randomColor(),
        vx: (Math.random() - 0.5) * 1.5,
        vy: Math.random() * -2.5 - 1.5,
        decay: Math.random() * 0.008 + 0.008
      });
    }

    function burstHearts(x, y, n = 8) {
      for (let i = 0; i < n; i++) {
        spawnHeart(x + Math.random() * 30 - 15, y + Math.random() * 30 - 15);
      }
    }

    // Mouse/touch interaction
    canvas.addEventListener('mousemove', function(e) {
      spawnHeart(e.clientX, e.clientY);
    });
    canvas.addEventListener('click', function(e) {
      burstHearts(e.clientX, e.clientY, 12);
    });
    canvas.addEventListener('touchmove', function(e) {
      for (let i = 0; i < e.touches.length; i++) {
        spawnHeart(e.touches[i].clientX, e.touches[i].clientY);
      }
    }, {passive:true});
    canvas.addEventListener('touchstart', function(e) {
      for (let i = 0; i < e.touches.length; i++) {
        burstHearts(e.touches[i].clientX, e.touches[i].clientY, 12);
      }
    }, {passive:true});

    // Floating hearts from bottom
    setInterval(() => {
      spawnHeart(Math.random() * canvas.width, canvas.height - 10);
    }, 200);

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let i = hearts.length - 1; i >= 0; i--) {
        let h = hearts[i];
        drawHeart(h.x, h.y, h.size, h.color, h.alpha);
        h.x += h.vx;
        h.y += h.vy;
        h.alpha -= h.decay;
        if (h.alpha <= 0) hearts.splice(i, 1);
      }
      requestAnimationFrame(animate);
    }
    animate();

    // Text rain effect
    const textLines = [
      "ANH YÊU EM 💖",
      "Em là của anh, mãi mãi 💞",
      "Em là tình yêu của anh 💘",
      "Em là tất cả của anh 💝",
      "Em là ánh sáng của cuộc đời anh 💗",
      "Em là niềm hạnh phúc của anh 💓",
      "CHÂU EM LÀ HẠNH PHÚC CỦA ANH💕",
      "Em là lý do anh cười mỗi ngày 😊",
      "Em là giấc mơ đẹp nhất của anh 🌹",
      "Em là người anh yêu thương nhất 💕",
      "Em là bầu trời của anh 🌈",
      "Em là ngôi sao sáng nhất trong cuộc đời anh 🌟",
      "Em là lý do anh sống mỗi ngày 🌸",
      "Em là nhịp đập của trái tim anh 💓",
      "Em là người anh muốn bên cạnh mãi mãi 💞",
      "Em là tình yêu đích thực của anh 💖",
      "Em là lý do anh tin vào tình yêu 💘",
      "Em là người anh muốn chia sẻ cuộc sống này 💑",
      "Em là người anh muốn cùng đi hết cuộc đời này 💍",
      "Mãi Yêu BÙI HOÀNG CHÂU 💖",
    ];
    const textRainContainer = document.getElementById('love-text-rain');

    function createTextRain() {
      const text = document.createElement('div');
      text.className = 'rain-text';
      const content = textLines[Math.floor(Math.random() * textLines.length)];
      text.innerText = content;

      // Tính toán chiều rộng chữ để không bị tràn
      let vw = window.innerWidth;
      let leftPercent = Math.random() * 70 + 5; // 5vw đến 75vw
      if (vw < 600) leftPercent = Math.random() * 60 + 10; // 10vw đến 70vw cho mobile

      text.style.left = leftPercent + 'vw';
      text.style.fontSize = (Math.random() * 0.7 + 1) + 'rem';
      text.style.animationDuration = (Math.random() * 1.2 + 2) + 's';

      // Các câu cần làm đỏ
      const redLines = [
        "ANH YÊU EM 💖",
        "CHÂU EM LÀ HẠNH PHÚC CỦA ANH💕",
        "Mãi Yêu BÙI HOÀNG CHÂU 💖"
      ];
      if (redLines.includes(content)) {
        text.style.color = "#ff2222";
        text.style.textShadow = "0 0 20px #ff2222, 0 0 40px #ff2222";
        text.style.fontWeight = "bold";
      }

      textRainContainer.appendChild(text);
      setTimeout(() => text.remove(), 4000);
    }
    setInterval(() => {
      for (let i = 0; i < 1; i++) createTextRain();
    }, 220);
  </script>
</body>
</html>