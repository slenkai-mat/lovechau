<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Love Animation</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
    }
    #love {
      position: relative;
      z-index: 2;
      text-align: center;
      width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      pointer-events: none;
    }
    h1 {
      color: #fff;
      font-family: 'Segoe Script', cursive;
      font-size: 3rem;
      text-shadow: 0 0 20px #ff6a88, 0 0 40px #ff6a88;
      margin-bottom: 20px;
      letter-spacing: 2px;
      pointer-events: auto;
    }
    #days-counter {
      font-size: 2rem;
      color: #fff;
      text-shadow: 0 0 10px #ff6a88;
      margin-bottom: 20px;
      pointer-events: auto;
    }
    #love-canvas {
      position: fixed;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
      z-index: 1;
      pointer-events: auto;
    }
    #love-text-rain {
      position: fixed;
      left: 0; top: 0; width: 100vw; height: 100vh;
      pointer-events: none;
      z-index: 10;
    }
    .rain-text {
      position: absolute;
      top: -2rem;
      color: #fff;
      font-family: 'Segoe Script', cursive;
      text-shadow: 0 0 20px #ff6a88, 0 0 40px #ff6a88;
      white-space: nowrap;
      opacity: 0.85;
      animation: rain-fall linear forwards;
    }
    @keyframes rain-fall {
      to {
        top: 100vh;
        opacity: 0.2;
      }
    }
    #pinkboard {
      position: fixed;
      left: 50%;
      top: 50%;
      width: 320px;
      height: 320px;
      transform: translate(-50%, -50%);
      z-index: 100;
      pointer-events: none;
      background: transparent;
    }
    @media (max-width: 500px) {
      #pinkboard {
        width: 180px;
        height: 180px;
      }
    }
  </style>
</head>
<body>
  <div id="love">
    <h1>ANH YÃŠU EM ðŸ’–</h1>
    <div id="days-counter"></div>
    <canvas id="love-canvas"></canvas>
    <div id="love-text-rain"></div>
  </div>
  <canvas id="pinkboard"></canvas>
  <script>
    // Days counter
    const startDate = new Date(2025, 1, 25); // 2025-02-25 (February 25, 2025)
    function updateDaysCounter() {
      const now = new Date();
      const diffTime = now - startDate;
      const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
      document.getElementById('days-counter').innerHTML =
        `Anh vÃ  em Ä‘Ã£ yÃªu nhau <b style="color:#ff6a88;">${diffDays}</b> ngÃ y rá»“i! ðŸ’ž`;
    }
    updateDaysCounter();
    setInterval(updateDaysCounter, 60 * 1000);

    // Heart animation
    const canvas = document.getElementById('love-canvas');
    const ctx = canvas.getContext('2d');
    let hearts = [];

    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);

    function drawHeart(x, y, size, color, alpha) {
      ctx.save();
      ctx.globalAlpha = alpha;
      ctx.beginPath();
      ctx.moveTo(x, y + size / 4);
      ctx.bezierCurveTo(x, y, x - size / 2, y, x - size / 2, y + size / 4);
      ctx.bezierCurveTo(x - size / 2, y + size / 2, x, y + size, x, y + size * 1.2);
      ctx.bezierCurveTo(x, y + size, x + size / 2, y + size / 2, x + size / 2, y + size / 4);
      ctx.bezierCurveTo(x + size / 2, y, x, y, x, y + size / 4);
      ctx.closePath();
      ctx.fillStyle = color;
      ctx.shadowColor = color;
      ctx.shadowBlur = 15;
      ctx.fill();
      ctx.restore();
    }

    function randomColor() {
      const colors = ['#ff6a88', '#ff99ac', '#ffb6b9', '#fad0c4', '#fcb69f'];
      return colors[Math.floor(Math.random() * colors.length)];
    }

    function spawnHeart(x, y) {
      hearts.push({
        x: x,
        y: y,
        size: Math.random() * 18 + 18,
        alpha: 1,
        color: randomColor(),
        vx: (Math.random() - 0.5) * 1.5,
        vy: Math.random() * -2.5 - 1.5,
        decay: Math.random() * 0.008 + 0.008
      });
    }

    function burstHearts(x, y, n = 8) {
      for (let i = 0; i < n; i++) {
        spawnHeart(x + Math.random() * 30 - 15, y + Math.random() * 30 - 15);
      }
    }

    // Mouse/touch interaction
    canvas.addEventListener('mousemove', function(e) {
      spawnHeart(e.clientX, e.clientY);
    });
    canvas.addEventListener('click', function(e) {
      burstHearts(e.clientX, e.clientY, 12);
    });
    canvas.addEventListener('touchmove', function(e) {
      for (let i = 0; i < e.touches.length; i++) {
        spawnHeart(e.touches[i].clientX, e.touches[i].clientY);
      }
    }, {passive:true});
    canvas.addEventListener('touchstart', function(e) {
      for (let i = 0; i < e.touches.length; i++) {
        burstHearts(e.touches[i].clientX, e.touches[i].clientY, 12);
      }
    }, {passive:true});

    // Floating hearts from bottom
    setInterval(() => {
      spawnHeart(Math.random() * canvas.width, canvas.height - 10);
    }, 200);

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let i = hearts.length - 1; i >= 0; i--) {
        let h = hearts[i];
        drawHeart(h.x, h.y, h.size, h.color, h.alpha);
        h.x += h.vx;
        h.y += h.vy;
        h.alpha -= h.decay;
        if (h.alpha <= 0) hearts.splice(i, 1);
      }
      requestAnimationFrame(animate);
    }
    animate();

    // Text rain effect
    const textLines = [
      "ANH YÃŠU EM ðŸ’–",
      "Em lÃ  cá»§a anh, mÃ£i mÃ£i ðŸ’ž",
      "Em lÃ  tÃ¬nh yÃªu cá»§a anh ðŸ’˜",
      "Em lÃ  táº¥t cáº£ cá»§a anh ðŸ’",
      "Em lÃ  Ã¡nh sÃ¡ng cá»§a cuá»™c Ä‘á»i anh ðŸ’—",
      "Em lÃ  niá»m háº¡nh phÃºc cá»§a anh ðŸ’“",
      "CHÃ‚U EM LÃ€ Háº NH PHÃšC Cá»¦A ANHðŸ’•",
      "Em lÃ  lÃ½ do anh cÆ°á»i má»—i ngÃ y ðŸ˜Š",
      "Em lÃ  giáº¥c mÆ¡ Ä‘áº¹p nháº¥t cá»§a anh ðŸŒ¹",
      "Em lÃ  ngÆ°á»i anh yÃªu thÆ°Æ¡ng nháº¥t ðŸ’•",
      "Em lÃ  báº§u trá»i cá»§a anh ðŸŒˆ",
      "Em lÃ  ngÃ´i sao sÃ¡ng nháº¥t trong cuá»™c Ä‘á»i anh ðŸŒŸ",
      "Em lÃ  lÃ½ do anh sá»‘ng má»—i ngÃ y ðŸŒ¸",
      "Em lÃ  nhá»‹p Ä‘áº­p cá»§a trÃ¡i tim anh ðŸ’“",
      "Em lÃ  ngÆ°á»i anh muá»‘n bÃªn cáº¡nh mÃ£i mÃ£i ðŸ’ž",
      "Em lÃ  tÃ¬nh yÃªu Ä‘Ã­ch thá»±c cá»§a anh ðŸ’–",
      "Em lÃ  lÃ½ do anh tin vÃ o tÃ¬nh yÃªu ðŸ’˜",
      "Em lÃ  ngÆ°á»i anh muá»‘n chia sáº» cuá»™c sá»‘ng nÃ y ðŸ’‘",
      "Em lÃ  ngÆ°á»i anh muá»‘n cÃ¹ng Ä‘i háº¿t cuá»™c Ä‘á»i nÃ y ðŸ’",
      "MÃ£i YÃªu BÃ™I HOÃ€NG CHÃ‚U ðŸ’–",
    ];
    const textRainContainer = document.getElementById('love-text-rain');

    function createTextRain() {
      const text = document.createElement('div');
      text.className = 'rain-text';
      const content = textLines[Math.floor(Math.random() * textLines.length)];
      text.innerText = content;

      // TÃ­nh toÃ¡n chiá»u rá»™ng chá»¯ Ä‘á»ƒ khÃ´ng bá»‹ trÃ n
      let vw = window.innerWidth;
      let leftPercent = Math.random() * 70 + 5; // 5vw Ä‘áº¿n 75vw
      if (vw < 600) leftPercent = Math.random() * 60 + 10; // 10vw Ä‘áº¿n 70vw cho mobile

      text.style.left = leftPercent + 'vw';
      text.style.fontSize = (Math.random() * 0.7 + 1) + 'rem';
      text.style.animationDuration = (Math.random() * 1.2 + 2) + 's';

      // CÃ¡c cÃ¢u cáº§n lÃ m Ä‘á»
      const redLines = [
        "ANH YÃŠU EM ðŸ’–",
        "CHÃ‚U EM LÃ€ Háº NH PHÃšC Cá»¦A ANHðŸ’•",
        "MÃ£i YÃªu BÃ™I HOÃ€NG CHÃ‚U ðŸ’–"
      ];
      if (redLines.includes(content)) {
        text.style.color = "#ff2222";
        text.style.textShadow = "0 0 20px #ff2222, 0 0 40px #ff2222";
        text.style.fontWeight = "bold";
      }

      textRainContainer.appendChild(text);
      setTimeout(() => text.remove(), 4000);
    }
    setInterval(() => {
      for (let i = 0; i < 1; i++) createTextRain();
    }, 220);

    // Heart particle animation in center
    (function(canvas) {
  var settings = {
    particles: {
      length:   2000,
      duration:   2,
      velocity: 100,
      effect: -1.3,
      size:      13,
    },
  };
  var Point = function(x, y) {
    this.x = x || 0;
    this.y = y || 0;
  };
  Point.prototype.clone = function() { return new Point(this.x, this.y); };
  Point.prototype.length = function(length) {
    if (typeof length == 'undefined')
      return Math.sqrt(this.x * this.x + this.y * this.y);
    this.normalize();
    this.x *= length; this.y *= length; return this;
  };
  Point.prototype.normalize = function() {
    var length = this.length();
    this.x /= length; this.y /= length; return this;
  };
  var Particle = function() {
    this.position = new Point();
    this.velocity = new Point();
    this.acceleration = new Point();
    this.age = 0;
  };
  Particle.prototype.initialize = function(x, y, dx, dy) {
    this.position.x = x; this.position.y = y;
    this.velocity.x = dx; this.velocity.y = dy;
    this.acceleration.x = dx * settings.particles.effect;
    this.acceleration.y = dy * settings.particles.effect;
    this.age = 0;
  };
  Particle.prototype.update = function(deltaTime) {
    this.position.x += this.velocity.x * deltaTime;
    this.position.y += this.velocity.y * deltaTime;
    this.velocity.x += this.acceleration.x * deltaTime;
    this.velocity.y += this.acceleration.y * deltaTime;
    this.age += deltaTime;
  };
  Particle.prototype.draw = function(context, image) {
    function ease(t) { return (--t) * t * t + 1; }
    var size = image.width * ease(this.age / settings.particles.duration);
    context.globalAlpha = 1 - this.age / settings.particles.duration;
    context.drawImage(image, this.position.x - size / 2, this.position.y - size / 2, size, size);
  };
  var ParticlePool = function(length) {
    this.particles = new Array(length);
    for (var i = 0; i < this.particles.length; i++)
      this.particles[i] = new Particle();
    this.firstActive = 0;
    this.firstFree = 0;
    this.duration = settings.particles.duration;
  };
  ParticlePool.prototype.add = function(x, y, dx, dy) {
    this.particles[this.firstFree].initialize(x, y, dx, dy);
    this.firstFree++;
    if (this.firstFree == this.particles.length) this.firstFree = 0;
    if (this.firstActive == this.firstFree) this.firstActive++;
    if (this.firstActive == this.particles.length) this.firstActive = 0;
  };
  ParticlePool.prototype.update = function(deltaTime) {
    var i;
    if (this.firstActive < this.firstFree) {
      for (i = this.firstActive; i < this.firstFree; i++)
        this.particles[i].update(deltaTime);
    }
    if (this.firstFree < this.firstActive) {
      for (i = this.firstActive; i < this.particles.length; i++)
        this.particles[i].update(deltaTime);
      for (i = 0; i < this.firstFree; i++)
        this.particles[i].update(deltaTime);
    }
    while (this.particles[this.firstActive].age >= this.duration && this.firstActive != this.firstFree) {
      this.firstActive++;
      if (this.firstActive == this.particles.length) this.firstActive = 0;
    }
  };
  ParticlePool.prototype.draw = function(context, image) {
    var i;
    if (this.firstActive < this.firstFree) {
      for (i = this.firstActive; i < this.firstFree; i++)
        this.particles[i].draw(context, image);
    }
    if (this.firstFree < this.firstActive) {
      for (i = this.firstActive; i < this.particles.length; i++)
        this.particles[i].draw(context, image);
      for (i = 0; i < this.firstFree; i++)
        this.particles[i].draw(context, image);
    }
  };
  var context = canvas.getContext('2d'),
      particles = new ParticlePool(settings.particles.length),
      particleRate = settings.particles.length / settings.particles.duration,
      time;
  function pointOnHeart(t) {
    return new Point(
      160 * Math.pow(Math.sin(t), 3),
      130 * Math.cos(t) - 50 * Math.cos(2 * t) - 20 * Math.cos(3 * t) - 10 * Math.cos(4 * t) + 25
    );
  }
  var image = (function() {
    var canvas2  = document.createElement('canvas'),
        context2 = canvas2.getContext('2d');
    canvas2.width  = settings.particles.size;
    canvas2.height = settings.particles.size;
    function to(t) {
      var point = pointOnHeart(t);
      point.x = settings.particles.size / 2 + point.x * settings.particles.size / 350;
      point.y = settings.particles.size / 2 - point.y * settings.particles.size / 350;
      return point;
    }
    context2.beginPath();
    var t = -Math.PI;
    var point = to(t);
    context2.moveTo(point.x, point.y);
    while (t < Math.PI) {
      t += 0.01;
      point = to(t);
      context2.lineTo(point.x, point.y);
    }
    context2.closePath();
    context2.fillStyle = '#FF5CA4';
    context2.fill();
    var image = new Image();
    image.src = canvas2.toDataURL();
    return image;
  })();
  function render() {
    requestAnimationFrame(render);
    var newTime   = new Date().getTime() / 1000,
        deltaTime = newTime - (time || newTime);
    time = newTime;
    context.clearRect(0, 0, canvas.width, canvas.height);
    var amount = particleRate * deltaTime;
    for (var i = 0; i < amount; i++) {
      var pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());
      var dir = pos.clone().length(settings.particles.velocity);
      particles.add(canvas.width / 2 + pos.x, canvas.height / 2 - pos.y, dir.x, -dir.y);
    }
    particles.update(deltaTime);
    particles.draw(context, image);
  }
  function onResize() {
  // Láº¥y Ä‘Ãºng kÃ­ch thÆ°á»›c CSS hiá»‡n táº¡i
  const style = getComputedStyle(canvas);
  const width = parseInt(style.width);
  const height = parseInt(style.height);
  canvas.width = width;
  canvas.height = height;
}
  window.addEventListener('resize', onResize);
  setTimeout(function() {
    onResize();
    render();
  }, 10);
})(document.getElementById('pinkboard'));
  </script>
</body>
</html>